IssueComment {issueCommentUpdatedAt = GithubDate {fromGithubDate = 2013-06-25 07:14:58 UTC}, issueCommentUser = GithubUser {githubOwnerAvatarUrl = "https://secure.gravatar.com/avatar/97c543aca1ac7bbcfb5279d0300c8330?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", githubOwnerLogin = "njsmith", githubOwnerUrl = "https://api.github.com/users/njsmith", githubOwnerId = 609896, githubOwnerGravatarId = "97c543aca1ac7bbcfb5279d0300c8330"}, issueCommentUrl = "https://api.github.com/repos/pydata/patsy/issues/comments/19957309", issueCommentCreatedAt = GithubDate {fromGithubDate = 2013-06-25 07:14:58 UTC}, issueCommentBody = "The reason x2**2 doesn't work is that\r\n  x2**2\r\nis shorthand for\r\n  x2 * x2\r\nwhich is shorthand for\r\n  x2 + x2 + x2:x2\r\nwhich collapses down to just plain\r\n  x2\r\nbecause self-interactions don't make sense. See\r\n  https://patsy.readthedocs.org/en/latest/formulas.html#the-formula-language\r\n\r\nThere's an argument that for numerical predictors, x2:x2 should be the same\r\nas np.multiply(x2, x2), just like x1:x2 is the same as np.multiply(x1, x2).\r\nBut even then x2**2 would mean x2+np.multiply(x2, x2).\r\n\r\nIn your example, I(x2**2) doesn't work because x2 is a python list, not a\r\nnumpy array. patsy has no crystal ball that tells it that lists should be\r\ncoerced to arrays while interpreting arbitrary python code. Use DataFrame()\r\ninstead of dict() and it will just work...\r\n\r\nOn Tue, Jun 25, 2013 at 1:24 AM, Skipper Seabold\r\n<notifications@github.com>wrote:\r\n\r\n> I've seen\r\n> https://groups.google.com/forum/#!topic/pystatsmodels/96cMRgFXBaA, but\r\n> why doesn't something like this work.\r\n>\r\n> from patsy import dmatrices\r\n> data = dict(y=range(1,11), x1=range(21,31), x2=range(11,21))\r\n>\r\n> dmatrices(\"y ~ x1 + x2**2\", data)\r\n>\r\n> or\r\n>\r\n> dmatrices(\"y ~ x1 + I(x2**2)\", data)\r\n>\r\n> This works\r\n>\r\n> dmatrices(\"y ~ x1 + np.power(x2, 2)\", data)\r\n>\r\n> \8212\r\n> Reply to this email directly or view it on GitHub<https://github.com/pydata/patsy/issues/20>\r\n> .\r\n>", issueCommentId = 19957309}